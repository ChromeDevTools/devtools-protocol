<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../viewer-param/viewer-param.html">
<link rel="import" href="../html-echo/html-echo.html">

<dom-module id="viewer-method">
  <template>
    <div>
      <h4 class="method-name monospace">{{name}}</h4>

      <p class="method-description">
        <html-echo html="{{description}}"></html-echo>
      </p>

      <h5 hidden="[[_isEmpty(parameters)]]">Parameters</h5>
      <dl class="parameter-list" hidden="[[_isEmpty(parameters)]]">
        <template is="dom-repeat" items="{{parameters}}" as="param">
          <viewer-param
            name="{{param.name}}"
            description="{{param.description}}"
            optional="{{param.optional}}"
            type="{{param.type}}"
            ref="{{param.$ref}}"></viewer-param>
        </template>
      </dl>

      <h5 hidden="[[_isEmpty(returns)]]">Return object</h5>
      <dl class="parameter-list" hidden="[[_isEmpty(returns)]]">
        <template is="dom-repeat" items="{{returns}}" as="ret">
          <viewer-param
            name="{{ret.name}}"
            description="{{ret.description}}"
            optional="{{ret.optional}}"
            type="{{ret.type}}"
            ref="{{ret.$ref}}"></viewer-param>
        </template>
      </dl>
    </div>
  </template>
  <style>
    .parameter-list {
      border: 2px solid hsl(0, 0%, 85%);
      border-radius: 5px;
      margin: 0 10%;
    }

    @media (max-width: 980px) {
      .parameter-list {
        margin: 0;
      }
    }
  </style>
</dom-module>
<script>
  Polymer({
    is: 'viewer-method',
    properties: {
      name: String,
      description: String,
      parameters: Object,
      returns: Object
    },
    _isEmpty: function (paramObj) {
      return !paramObj || !paramObj.length;
    },
    ready: function () {
      this.parameters = null;
      this.returns = null;
    }
  });
</script>
